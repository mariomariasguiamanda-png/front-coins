/* 1) Import da fonte no topo (CSS padrão) */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap");

/* 2) Diretivas Tailwind em seguida (boa prática) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Reset & base */
* { box-sizing: border-box; padding: 0; margin: 0; }

html, body {
  max-width: 100vw;
  overflow-x: hidden;
  font-family: "Inter", sans-serif;
}

body { color: #000; background: #f0f8ff; }

a { color: inherit; text-decoration: none; }

@media (prefers-color-scheme: dark) {
  html { color-scheme: dark; }
}

/* ===== Força visual claro em páginas Admin (inclui portais) ===== */
.admin-body { color-scheme: light !important; }
.admin-body * { color-scheme: light !important; }

/* ===== Componentes personalizados ===== */
@layer components {
  .btn-primary {
    @apply bg-primary-500 hover:bg-primary-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200 ease-in-out;
  }

  .btn-secondary {
    @apply bg-secondary-100 hover:bg-secondary-200 text-secondary-900 font-medium py-2 px-4 rounded-lg transition duration-200 ease-in-out;
  }

  /* Base da dev: inputs claros (Admin e geral) */
  .input-field {
    @apply w-full px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent;
    @apply dark:bg-white dark:text-slate-900 dark:placeholder-slate-400;
  }

  /* Variante tokenizada opcional (herda vibe da feat) */
  .input-field--tokens {
    @apply w-full px-3 py-2 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-slate-900 placeholder-slate-400;
  }

  /* Escopo Admin: inputs nativos claros mesmo sem componente */
  .admin-theme input[type="text"],
  .admin-theme input[type="email"],
  .admin-theme input[type="password"],
  .admin-theme input[type="search"],
  .admin-theme input:not([type]),
  .admin-theme select,
  .admin-theme textarea {
    @apply bg-white text-slate-900 placeholder-slate-400 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent;
  }

  /* shadcn Select em Admin (em tema claro) */
  .admin-theme .sh-select-trigger {
    @apply bg-white text-slate-900 placeholder-slate-400 border border-slate-300 focus:ring-2 focus:ring-violet-500 focus:border-transparent rounded-lg;
  }
  .admin-theme .sh-select-content {
    @apply bg-white text-slate-900 border border-slate-200;
  }
  .admin-theme [role="option"][data-highlighted] {
    @apply bg-violet-50 text-violet-700;
  }

  /* Como portais podem sair de .admin-theme, garantimos pelo body */
  .admin-body .sh-select-trigger {
    background-color: #ffffff !important;
    color: #0f172a !important; /* slate-900 */
    border-color: #cbd5e1 !important; /* slate-300 */
    border-radius: 0.5rem !important; /* rounded-lg */
  }
  .admin-body .sh-select-trigger:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.6) !important; /* ring-violet-500 */
  }
  .admin-body .sh-select-content {
    background-color: #ffffff !important;
    color: #0f172a !important;
    border: 1px solid #e5e7eb !important; /* gray-200 */
  }
  .admin-body .sh-select-content [role="option"][data-highlighted] {
    background-color: #f5f3ff !important; /* violet-50 */
    color: #6d28d9 !important; /* violet-700 */
  }

  /* Ícone refresh em Admin (mantém violeta) */
  .admin-body .notif-refresh-btn,
  .admin-body .notif-refresh-btn svg {
    color: #7c3aed !important; /* violet-600 */
  }
  .admin-body .notif-refresh-btn:hover svg { color: #6d28d9 !important; } /* violet-700 */
  .admin-body .notif-refresh-btn:disabled svg { color: #7c3aed !important; }

  .card { @apply bg-secondary-200 rounded-lg shadow-md p-6; }
  .form-error { @apply text-red-500 text-sm mt-1; }
}

/* ===== Design tokens ===== */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * { @apply border-border; }
  /* body { @apply text-black; } */
}

/* ===== Animações (mescladas) ===== */
@keyframes fadeInUp { from { opacity:0; transform: translateY(15px);} to { opacity:1; transform: translateY(0);} }
@keyframes cardEnter { from { opacity:0; transform: translateY(20px);} to { opacity:1; transform: translateY(0);} }

.animate-card-enter { animation: cardEnter 0.5s ease-out forwards; opacity: 0; }

.progress-bar { transition: width 0.4s cubic-bezier(0.4,0,0.2,1); will-change: width; }

.smooth-button { transition: all 0.3s cubic-bezier(0.4,0,0.2,1); }
.smooth-button:hover { transform: translateY(-2px) scale(1.05); }
.smooth-button:active { transform: translateY(0) scale(0.95); }

@keyframes pageSlideOut { from {opacity:1; transform: translateX(0);} to {opacity:0; transform: translateX(-20px);} }
.nav-button { transition: all 0.25s cubic-bezier(0.4,0,0.2,1); }
.nav-button:hover { transform: translateY(-1px) scale(1.02); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.nav-button:active { transform: translateY(0) scale(0.98); }
.nav-button.existing { animation: pageSlideOut 0.25s ease-out forwards; }

.nav-spinner { animation: spin 1s linear infinite; }
@keyframes spin { from {transform: rotate(0deg);} to {transform: rotate(360deg);} }

@keyframes pageSlideIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }
.page-enter { animation: pageSlideIn 0.4s ease-out; }

@keyframes cardBounceIn {
  0% { opacity:0; transform: translateY(20px) scale(0.95); }
  60% { transform: translateY(-5px) scale(1.02); }
  100% { opacity:1; transform: translateY(0) scale(1); }
}
.card-bounce { animation: cardBounceIn 0.5s ease-out forwards; opacity: 0; }
.card-bounce-delay-1 { animation-delay: 0.1s; }
.card-bounce-delay-2 { animation-delay: 0.2s; }
.card-bounce-delay-3 { animation-delay: 0.3s; }
.card-bounce-delay-4 { animation-delay: 0.4s; }
.card-bounce-delay-5 { animation-delay: 0.5s; }
.card-bounce-delay-6 { animation-delay: 0.6s; }

/* moedas caindo (nome usado nos componentes existentes) */
@keyframes coinFall {
  0% { opacity: 0; transform: translateY(-50px) rotate(0deg); }
  10% { opacity: 1; }
  100% { opacity: 0; transform: translateY(100vh) rotate(360deg); }
}
.coin-falling { animation: coinFall linear infinite; position:absolute; font-size:24px; pointer-events:none; z-index:50; }

/* Variante de animação usada em dev (mantida) */
@keyframes coin-fall {
  0% { transform: translateY(-100px) rotateZ(0deg); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(400px) rotateZ(720deg); opacity: 0; }
}
.animate-coin-fall { animation: coin-fall 3s ease-in forwards; }

@keyframes successPulse {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}
.success-icon { animation: successPulse 0.6s ease-out; }

.smooth-transition { transition: all 0.3s cubic-bezier(0.4,0,0.2,1); }
.hover-lift:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

@keyframes graphFadeIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }
.graph-container { animation: graphFadeIn 0.5s ease-out; }

@keyframes barGrow { from { width:0; opacity:0.7; } to { opacity:1; } }
.bar-animated { animation: barGrow 1s ease-out forwards; position:relative; overflow:hidden; }
@keyframes shimmer {
  0% { transform: translateX(-100%); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateX(100%); opacity: 0; }
}
.bar-animated::after {
  content:""; position:absolute; inset:0;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
  animation: shimmer 2s ease-in-out infinite; animation-delay: 1.2s;
}

@keyframes coinsBounce {
  0% { opacity:0; transform: translateY(-5px) scale(0.8); }
  60% { transform: translateY(-2px) scale(1.05); }
  100% { opacity:1; transform: translateY(0) scale(1); }
}
.coins-value { animation: coinsBounce 0.4s ease-out forwards; opacity:0; }

.bar-delay-0 { animation-delay: 0.1s; }
.bar-delay-1 { animation-delay: 0.2s; }
.bar-delay-2 { animation-delay: 0.3s; }
.bar-delay-3 { animation-delay: 0.4s; }
.bar-delay-4 { animation-delay: 0.5s; }
.bar-delay-5 { animation-delay: 0.6s; }

.coins-delay-0 { animation-delay: 0.9s; }
.coins-delay-1 { animation-delay: 1s; }
.coins-delay-2 { animation-delay: 1.1s; }
.coins-delay-3 { animation-delay: 1.2s; }
.coins-delay-4 { animation-delay: 1.3s; }
.coins-delay-5 { animation-delay: 1.4s; }

/* total acumulado */
@keyframes totalFadeIn { from {opacity:0; transform: translateY(10px) scale(0.95);} to {opacity:1; transform: translateY(0) scale(1);} }
.total-animated { animation: totalFadeIn 0.6s ease-out 1.6s forwards; opacity:0; }
